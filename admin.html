<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Dashboard Admin</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  font-family:Arial;
  background:#f0f6ff;
  padding:20px;
}
.box{
  max-width:700px;
  margin:auto;
  background:#fff;
  padding:20px;
  border-radius:8px;
}
h2{text-align:center;color:#0b5ed7}
input,button{
  padding:10px;
  margin-top:8px;
  width:100%;
}
button{
  background:#0b5ed7;
  color:#fff;
  border:none;
  border-radius:5px;
}
table{
  width:100%;
  margin-top:20px;
  border-collapse:collapse;
}
th,td{
  border:1px solid #ccc;
  padding:8px;
  text-align:center;
}
</style>
</head>

<body>
<div class="box">
  <h2>DASHBOARD ADMIN</h2>

  <button onclick="logout()">Logout</button>

  <hr>

  <input id="nisn" placeholder="NISN">
  <input id="nama" placeholder="Nama">
  <input id="kelas" placeholder="Kelas">
  <input id="nilai" placeholder="Nilai">
  <input id="foto" placeholder="Link Foto (opsional)">
  <button onclick="tambah()">Tambah Data</button>

  <table id="tabel">
    <thead>
      <tr>
        <th>NISN</th><th>Nama</th><th>Kelas</th><th>Nilai</th><th>Aksi</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<script>
const SHEET_API = "https://sheetdb.io/api/v1/YOUR_API_ID"; 
// GANTI dengan SheetDB kamu

if(localStorage.getItem("adminLogin")!=="yes"){
  location.href="admin.html";
}

function logout(){
  localStorage.removeItem("adminLogin");
  location.href="admin.html";
}

async function load(){
  const res = await fetch(SHEET_API);
  const data = await res.json();
  const tb = document.querySelector("#tabel tbody");
  tb.innerHTML="";
  data.forEach(d=>{
    tb.innerHTML+=`
      <tr>
        <td>${d.nisn}</td>
        <td>${d.nama}</td>
        <td>${d.kelas}</td>
        <td>${d.nilai}</td>
        <td><button onclick="hapus('${d.id}')">Hapus</button></td>
      </tr>`;
  });
}

async function tambah(){
  const data={
    nisn:nisn.value,
    nama:nama.value,
    kelas:kelas.value,
    nilai:nilai.value,
    foto:foto.value
  };
  await fetch(SHEET_API,{method:"POST",headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});
  load();
}

async function hapus(id){
  if(confirm("Hapus data?")){
    await fetch(`${SHEET_API}/${id}`,{method:"DELETE"});
    load();
  }
}

load();
</script>
</body>
</html>
